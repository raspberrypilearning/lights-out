## إضافة مؤقِت

بعد تشغيل الضوء، تحتاج إلى بدء تشغيل مؤقت والتحقق من الوقت الذي يستغرقه المشغل للضغط على الزر.

- أولاً، ستحتاج إلى إخبار Python باستيراد دالة time. بجانب عبارات `import` الاخرى، اضف السطر البرمجي `from time import time` لاخبار Python انك تريد استخدام دالة `Python`.

- انتقل إلى المكان الموجود في برنامجك مباشرةً قبل سطر التعليمة البرمجية الخاصة بالتحقق من الزر الذي يتم الضغط عليه. قم بإنشاء متغير يسمى `start` لتسجيل الوقت الحالي: سيتم توفير هذا بواسطة Raspberry Pi الخاص بك وهو دقيق جدًا.
    
    ```python
    # ... التعليمات البرمجية الاخرى أعلاه
    
    # سجل الوقت الحالي
    start = time()
    
    # ... تعليمات برمجية اخرى ادناه
    
    ```

- يمكنك اختيار عدد الثواني التي سيتعين على المشغل فيها الضغط على الزر بمجرد تشغيل الضوء. اضف **constant** إلى برنامجك مباشرة بعد المتغير `game_in_progress` مع القيمة التي اخترتها. اخترنا السماح للاعبنا بـ 1.5 ثانية:
    
    ```python
    game_in_progress = True
    TIME_ALLOWED = 1.5
    
    ```
    
    كلما كان الرقم أصغر، كلما توجب على اللاعب ان يكون أسرع!

- أضف الآن حلقة تكرارية للاستمرار في التحقق مما إذا كان المستخدم قد تجاوز مقدار الوقت المسموح له بأخذه. يمكنك أن تفكر في التحقق المستمر من هذه الحلقة التكرارية على أنها مثل شخص ما في رحلة طويلة بالسيارة، الذي يستمر في التساؤل "هل اقتربنا من الوصول بعد؟" ، "هل نحن هناك الآن؟" ، "ماذا عن الآن؟"!
    
    ```python
    ...
    
    # سجل الوقت الحالي
    start = time()
    
    waiting_for_press = True
    while waiting_for_press and game_in_progress:
    
        # ما هو الوقت الآن؟
        now = time()
        time_taken = now - start
    
        # تحقق من انهم استغرقوا اكثر من الوقت  المحد
        if time_taken > TIME_ALLOWED:
            print(لقد استغرقت وقتاً طويلاً!")
            explorerhat.light.off()
            game_in_progress = False    # خسر اللعبة
    
        else:
            explorerhat.touch.pressed(button_pressed)
    
    
    ```
    
    انقل التعليمة البرمجية للتعامل مع ضغطات الأزرار لتكون جزءًا من عبارة `else`. ستحتاج إلى ان تضيف **مسافة بادئة** لتكون في المكان المناسب.

- إذا قمت بتشغيل هذه التعليمة البرمجية، فسترى أنه حتى إذا قمت بالضغط على الزر الصحيح بسرعة كبيرة ، فسيظل البرنامج يعلن أنك استغرقت وقتًا طويلاً. هذا لأنك لم تخبر اللعبة بالتوقف عن التحقق، مما إذا كان الوقت قد انتهى عند الضغط على الزر. قم بتغيير الدالة `button_pressed` لإخبار التعليمة البرمجية بإيقاف المؤقت عند الضغط على زر.
    
    ```python
        def button_pressed(channel, event):
            print("You pressed " + str(channel) )
    
            explorerhat.light.off()
    
            global waiting_for_press
            waiting_for_press = False
    
    ```
    
    في هذه التعليمة البرمجية، `global` يسمح لنا بتغيير قيمة المتغير `waiting_for_press` من داخل الدالة.